import{_ as me,E as ue,r as l,l as pe,m as ve,s as z,a as ye,C as ge,x as j,b as k,c as d,e as p,p as V,q as M,t as s,i as c,j as x,f as e,g,F as J,k as Y,n as A}from"./index-iPFJELRm.js";import{u as he}from"./TheWalletMoney-YjMQLEts.js";const _e={setup(i,{emit:t}){const{severity:u,type:a}=ue(i),P=l(),H=l([{name:"BPI",code:"BPI"},{name:"Chinabank",code:"CHINABANK"},{name:"East West",code:"EASTWEST"},{name:"KOMO",code:"KOMO"},{name:"Landbank",code:"LANDBANK"},{name:"Metrobank",code:"METROBANK"},{name:"PNB",code:"PNB"},{name:"Security Bank",code:"SECURITYBANK"},{name:"Tonik",code:"TONIK"},{name:"Union Bank",code:"UNIONBANK"},{name:"UCPB",code:"UCPB"}]),S=pe(),h=l(0),m=l(0),_=l(0),v=l(0),I=l(!1),b=l(0),n=l("GCASH"),f=l("GCASH"),C=l(""),w=l(""),D=l("A+Pay"),L=l(""),U=l(""),G=l(),O=l(),K=l(),B=l(),N=l(),R=l(0),{balance:E}=he(),F=ve(),Q=z(()=>{const o=w.value.replace(/\D/g,"");w.value=o.length>0?o:""}),X=()=>{m.value=v.value*h.value/100},Z=z(()=>{h.value=m.value/v.value*100}),$=o=>{m.value=v.value*o/100,h.value=o},ee=()=>{h.value=0,m.value=0,C.value="",w.value="",_.value=0},ae=o=>{const y=parseFloat(o).toLocaleString("en-US",{style:"currency",currency:"PHP"});return console.log(y),y.replace("₱","₱ ")},ne=o=>{if(B.value=null,N.value){const y=[{name:"bdo",logo:"bdo.png"},{name:"bpi",logo:"bpi.png"},{name:"chinabank",logo:"chinabank.png"},{name:"easetwest",logo:"ew.png"},{name:"gcash",logo:"gcash.png"},{name:"komo",logo:"komo.png"},{name:"landbank",logo:"lb.png"},{name:"metrobank",logo:"mb.png"},{name:"paymaya",logo:"paymaya.png"},{name:"pnb",logo:"pnb.png"},{name:"rcbc",logo:"rcbc.svg"},{name:"security bank",logo:"scb.png"},{name:"tonik",logo:"tonik.png"},{name:"unionbank",logo:"ub.png"},{name:"ucpb",logo:"ucpb.png"},{name:"grabpay",logo:"GrabPay.webp"}],T=N.value.filter(r=>r.providerName===o.value.name);K.value=T.map(r=>{const q=/\s/.test(r.method)?r.method.split(/\s+/):[r.method],de=q[0].toLowerCase()?q[0].toLowerCase():r.name,re=y.find(ce=>ce.name.toLowerCase()===de);return{name:r.method,paymentID:r.paymentID,minDeposit:r.minDeposit,providerName:r.providerName,logo:re.logo}})}};a.value==="Withdraw"&&(v.value=E.current_balance,b.value=E.current_balance);const te=o=>{console.log(o.value),R.value=o.value.minDeposit};ye(async()=>{if(S.user){const o=S.user[0].token,y=await ge.postPaymentsInfo({token:o});N.value=y;const T=new Set(y.map(r=>r.providerName));G.value=Array.from(T).map(r=>({name:r,code:r}))}});const oe=()=>{if(f.value!="Bank"){let y=w.value.replace(/-/g,"");if(y.slice(0,2)!="09"){L.value="Invalid number. It should start with '09xx'-xxx-xxxx.";return}else w.value=y}else if(console.log(P.value),!P.value){U.value="Please select a bank";return}L.value="",U.value="";const o={methods:f.value,amount:m.value?parseFloat(m.value.toFixed(2)):0,accountName:C.value.trim(),accountNumber:w.value.trim(),selectedBank:P.value?P.value.code:""};t("submitWithdraw",o)},le=[100,200,500,1e3,2e3,3e3,4e3,5e3],se=[200,300,500,1e3,2e3,3e3,4e3,5e3],ie=o=>{o>v.value?m.value=v.value:m.value=o},W=l(["A+Pay","FPAy","Pagarstar"]);return j(n,o=>{o==="Paymaya"?(W.value=["Toppay"],D.value="Toppay"):o==="GCASH"&&(W.value=["A+Pay","FPAy","Pagarstar"],D.value="A+Pay")}),j(u,o=>{o==="success"&&(b.value=b.value-m.value,v.value=b.value,E.current_balance=b.value,w.value="",C.value="",m.value=0,f.value="GCASH")}),{amountWithdrawMinimum:se,accountBankErrorMessage:U,accountNumErrorMessage:L,severity:u,type:a,selectedPaymentGateway:D,paymentProviders:W,amountDepoList:le,selectedBank:P,bankOptions:H,amountValue:m,amountSlider:h,handleChangeInput:Z,depositAmount:_,addPaymentInfo:I,depositActivePayment:n,withdrawActivePayment:f,currentBalance:b,availableBalance:v,accountName:C,accountNumber:w,handleInputAmount:Q,optionPaymentProvider:G,available_payments:N,selectedPaymentProvider:O,optionResultPaymentMethod:K,selectedPaymentMethod:B,minimumdeposit:R,depositSubmit:()=>{if(_.value<=0){F.add({severity:"error",summary:"Failed",detail:"Amount deposit should not be 0",life:5e3});return}if(!O.value){F.add({severity:"error",summary:"Failed",detail:"Please fill the required fields",life:5e3});return}if(!B.value){F.add({severity:"error",summary:"Failed",detail:"Please fill the required fields",life:5e3});return}const o={paymentID:B.value.paymentID,methods:B.value.name,providerName:B.value.providerName,amount:_.value};t("submitDeposit",o)},withdrawSubmit:oe,withdrawButtonClicked:ie,handleChangeProvider:ne,clearFields:ee,percentButton:$,handleSliderChange:X,formatCurrency:ae,handleChangePaymentMethod:te}},props:{type:{type:String,default:""},responseMessage:{type:String,default:""},severity:{type:String,default:""},isLoading:{type:Boolean,default:!1}}},be={class:"mainDepWith"},fe={key:0},we={class:"depo",style:{display:"block"}},ke={class:"deposit_info"},xe={style:{width:"50%"}},Pe={style:{"font-weight":"600"}},Ce=e("small",{style:{color:"var(--red-300)"}},"*",-1),Be={style:{width:"50%"}},Ae={style:{"font-weight":"600"}},Se=e("small",{style:{color:"var(--red-300)"}},"*",-1),Ne={key:0,class:"flex align-items-center",style:{display:"flex",gap:"10px"}},Ve=["alt","src"],Me={key:1},Ie={class:"flex align-items-center",style:{display:"flex",gap:"10px"}},De=["alt","src"],Le={class:"paymentInput"},Ue={class:"flex flex-column gap-2"},Ee={for:"username",class:"fw-500"},Fe=e("small",{style:{color:"var(--red-300)"}},"*",-1),We={style:{color:"var(--red-600)","margin-left":"10px"},class:"mindep"},Te={style:{"margin-top":"15px","margin-bottom":"20px",display:"flex",gap:"10px","flex-wrap":"wrap"}},He=["onClick"],Ge={key:1},Oe={class:"w-method"},Ke={class:"w-parent w-100"},Re={for:"username",class:"fw-500 me-5"},qe={class:"withdrawMethods"},ze=e("span",null,"GCASH",-1),je=e("div",{class:"gcash"},null,-1),Je=[ze,je],Ye=e("span",null,"Paymaya",-1),Qe=e("div",{class:"paymaya"},null,-1),Xe=[Ye,Qe],Ze=e("span",null,"Bank",-1),$e=e("div",{class:"bank"},null,-1),ea=[Ze,$e],aa=e("div",{class:"customDivider1"},null,-1),na={class:"depositView"},ta=e("label",{for:"username",class:"fw-500"},[c("Bank "),e("small",{style:{color:"var(--red-300)"}},"*")],-1),oa={key:0,style:{color:"var(--red-500)","font-weight":"500"}},la={for:"username",class:"fw-500"},sa=e("small",{style:{color:"var(--red-300)"}},"*",-1),ia={for:"username",class:"fw-500"},da=e("small",{style:{color:"var(--red-300)"}},"*",-1),ra={key:2,style:{color:"var(--red-500)","font-weight":"500"}},ca={class:"flex flex-column gap-2 mt-1"},ma={class:"",style:{display:"flex","justify-content":"space-between","align-items":"baseline"}},ua={class:"amountDep"},pa=e("small",{style:{color:"var(--red-300)"}},"*",-1),va={style:{color:"var(--red-600)","font-size":"0.8rem","margin-left":"10px"},class:"mindep"},ya={style:{color:"#ff1354","text-shadow":"0 0 3px rgba(61, 33, 33, 0.258)","font-weight":"700"}},ga={style:{"margin-top":"15px","margin-bottom":"20px",display:"flex",gap:"10px","flex-wrap":"wrap"}},ha=["onClick"],_a={class:"amountSlider"},ba={class:"percentIconHolder"},fa=e("i",{class:"pi pi-percentage"},null,-1),wa=e("i",{class:"pi pi-percentage"},null,-1),ka=e("i",{class:"pi pi-percentage"},null,-1),xa=e("i",{class:"pi pi-percentage"},null,-1),Pa=e("i",{class:"pi pi-percentage"},null,-1),Ca={style:{display:"flex",gap:"15px","margin-top":"30px"}};function Ba(i,t,u,a,P,H){const S=k("Message"),h=k("Dropdown"),m=k("InputNumber"),_=k("Button"),v=k("InputText"),I=k("InputMask"),b=k("Slider");return d(),p("div",be,[u.type=="Deposit"?(d(),p("div",fe,[u.responseMessage?(d(),V(S,{key:0,severity:u.severity,closable:!1},{default:M(()=>[c(s(u.responseMessage),1)]),_:1},8,["severity"])):x("",!0),e("div",we,[e("div",ke,[e("div",xe,[e("span",Pe,[c(s(i.$t("paymentProvider"))+" ",1),Ce]),g(h,{modelValue:a.selectedPaymentProvider,"onUpdate:modelValue":t[0]||(t[0]=n=>a.selectedPaymentProvider=n),options:a.optionPaymentProvider,optionLabel:"name",placeholder:i.$t("selectPaymentProvider"),class:"w-100",style:{"margin-top":"5px"},onChange:a.handleChangeProvider},null,8,["modelValue","options","placeholder","onChange"])]),e("div",Be,[e("span",Ae,[c(s(i.$t("paymentMethod"))+" ",1),Se]),g(h,{onChange:a.handleChangePaymentMethod,modelValue:a.selectedPaymentMethod,"onUpdate:modelValue":t[1]||(t[1]=n=>a.selectedPaymentMethod=n),options:a.optionResultPaymentMethod,optionLabel:"name",placeholder:i.$t("selectPaymentMethod"),class:"w-100",style:{"margin-top":"5px"}},{value:M(n=>[n.value?(d(),p("div",Ne,[e("img",{alt:n.value.label,src:`/src/assets/payment_gateway_logo/${n.value.logo}`,class:"mr-2",style:{width:"30px","border-radius":"4px"}},null,8,Ve),e("div",null,s(n.value.name),1)])):(d(),p("span",Me,s(n.placeholder),1))]),option:M(n=>[e("div",Ie,[e("img",{alt:n.option.label,src:`/src/assets/payment_gateway_logo/${n.option.logo}`,class:"mr-2",style:{width:"30px","border-radius":"4px"}},null,8,De),e("div",null,s(n.option.name),1)])]),_:1},8,["onChange","modelValue","options","placeholder"])])]),e("div",Le,[e("div",Ue,[e("label",Ee,[c(s(i.$t("amount"))+" ",1),Fe,e("small",We,"("+s(i.$t("minimum"))+": 200)",1)]),g(m,{modelValue:a.depositAmount,"onUpdate:modelValue":t[2]||(t[2]=n=>a.depositAmount=n),inputId:"minmaxfraction",min:200,class:"w-100"},null,8,["modelValue"])]),e("div",Te,[(d(!0),p(J,null,Y(a.amountDepoList,(n,f)=>(d(),p("span",{key:f,style:{"background-color":"rgb(238, 238, 238)","text-align":"center",padding:"7px 15px","border-radius":"3px",cursor:"pointer","font-weight":"600","box-shadow":"0 0 5px rgba(114, 114, 114, 0.5)"},onClick:C=>a.depositAmount=n},"₱ "+s(n),9,He))),128))]),g(_,{label:i.$t("proceed"),class:"w-100 mt-1",onClick:a.depositSubmit,loading:u.isLoading},null,8,["label","onClick","loading"])])])])):x("",!0),u.type=="Withdraw"?(d(),p("div",Ge,[u.responseMessage?(d(),V(S,{key:0,severity:u.severity,closable:!1},{default:M(()=>[c(s(u.responseMessage),1)]),_:1},8,["severity"])):x("",!0),e("div",Oe,[e("div",Ke,[e("label",Re,s(i.$t("paymentMethod")),1),e("div",qe,[e("div",{class:A(`g ${a.withdrawActivePayment=="GCASH"?"active-payment":""}`),onClick:t[3]||(t[3]=n=>{a.withdrawActivePayment="GCASH",a.selectedBank=""})},Je,2),e("div",{class:A(`g ${a.withdrawActivePayment=="Paymaya"?"active-payment":""}`),onClick:t[4]||(t[4]=n=>{a.withdrawActivePayment="Paymaya",a.selectedBank=""})},Xe,2),e("div",{class:A(`g ${a.withdrawActivePayment=="Bank"?"active-payment":""}`),onClick:t[5]||(t[5]=n=>a.withdrawActivePayment="Bank")},ea,2)])])]),aa,e("div",na,[a.withdrawActivePayment==="Bank"?(d(),p("div",{key:0,class:A(["flex flex-column gap-2",{depbank:a.withdrawActivePayment==="Bank"}])},[ta,g(h,{modelValue:a.selectedBank,"onUpdate:modelValue":t[6]||(t[6]=n=>a.selectedBank=n),options:a.bankOptions,optionLabel:"name",placeholder:"Select Payment Method",class:"w-100"},null,8,["modelValue","options"]),a.accountBankErrorMessage?(d(),p("small",oa,s(a.accountBankErrorMessage),1)):x("",!0)],2)):x("",!0),e("div",{class:A(["flex flex-column gap-2",{depbank:a.withdrawActivePayment==="Bank"}])},[e("label",la,[c(s(i.$t("accountName"))+" ",1),sa]),g(v,{id:"username",modelValue:a.accountName,"onUpdate:modelValue":t[7]||(t[7]=n=>a.accountName=n),placeholder:"Ex: John Doe",maxlength:50,"aria-describedby":"username-help",style:{"margin-top":"5px"},autocomplete:"off"},null,8,["modelValue"])],2),e("div",{class:A(["flex flex-column gap-2",{depbank:a.withdrawActivePayment==="Bank"}])},[e("label",ia,[c(s(i.$t("accountNum"))+" ",1),da]),a.withdrawActivePayment!="Bank"?(d(),V(I,{key:0,id:"ssn",modelValue:a.accountNumber,"onUpdate:modelValue":t[8]||(t[8]=n=>a.accountNumber=n),mask:"9999-999-9999",placeholder:"09xx-xxx-xxxx",style:{"margin-top":"5px"}},null,8,["modelValue"])):(d(),V(v,{key:1,type:"text",class:"w-100",modelValue:a.accountNumber,"onUpdate:modelValue":t[9]||(t[9]=n=>a.accountNumber=n),onBlur:a.handleInputAmount,maxlength:20,style:{"margin-top":"5px"}},null,8,["modelValue","onBlur"])),a.accountNumErrorMessage?(d(),p("small",ra,s(a.accountNumErrorMessage),1)):x("",!0)],2)]),e("div",ca,[e("div",ma,[e("div",ua,[e("label",null,[c(s(i.$t("amount"))+" ",1),pa]),e("small",va,"("+s(i.$t("minimum"))+": 200)",1)]),e("span",null,[c(s(i.$t("currentBalance"))+": ",1),e("span",ya,s(a.formatCurrency(a.currentBalance)),1)])]),g(m,{modelValue:a.amountValue,"onUpdate:modelValue":t[10]||(t[10]=n=>a.amountValue=n),inputId:"minmaxfraction",maxFractionDigits:2,max:a.availableBalance,min:200,onInput:a.handleChangeInput,class:"w-100"},null,8,["modelValue","max","onInput"])]),e("div",ga,[(d(!0),p(J,null,Y(a.amountWithdrawMinimum,(n,f)=>(d(),p("span",{key:f,style:{"background-color":"rgb(238, 238, 238)","text-align":"center",padding:"7px 15px","border-radius":"3px",cursor:"pointer","font-weight":"600","box-shadow":"0 0 5px rgba(114, 114, 114, 0.5)"},onClick:C=>a.withdrawButtonClicked(n)},"₱ "+s(n),9,ha))),128))]),e("div",_a,[g(b,{modelValue:a.amountSlider,"onUpdate:modelValue":t[11]||(t[11]=n=>a.amountSlider=n),style:{"z-index":"3"},onChange:a.handleSliderChange},null,8,["modelValue","onChange"]),e("div",ba,[e("p",{class:"amountPercentageSlider",onClick:t[12]||(t[12]=n=>a.percentButton(0))},[c(" 0 "),fa]),e("p",{class:"amountPercentageSlider",onClick:t[13]||(t[13]=n=>a.percentButton(25))},[c(" 25 "),wa]),e("p",{class:"amountPercentageSlider",onClick:t[14]||(t[14]=n=>a.percentButton(50))},[c(" 50 "),ka]),e("p",{class:"amountPercentageSlider",onClick:t[15]||(t[15]=n=>a.percentButton(75))},[c(" 75 "),xa]),e("p",{class:"amountPercentageSlider",onClick:t[16]||(t[16]=n=>a.percentButton(100))},[c(" 100 "),Pa])])]),e("div",Ca,[g(_,{label:i.$t("proceed"),class:"w-100",onClick:a.withdrawSubmit,loading:u.isLoading},null,8,["label","onClick","loading"]),g(_,{class:"w-100",label:i.$t("clear"),outlined:"",onClick:a.clearFields},null,8,["label","onClick"])])])):x("",!0)])}const Ma=me(_e,[["render",Ba]]);export{Ma as W};
